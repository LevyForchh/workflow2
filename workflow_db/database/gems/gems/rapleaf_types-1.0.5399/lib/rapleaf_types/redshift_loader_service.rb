#
# Autogenerated by Thrift Compiler (0.11.0)
#
# DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
#

require 'thrift'
require File.join File.dirname(__FILE__), 'servile_service'
require File.join File.dirname(__FILE__), 'redshift_ingester_types'

module Liveramp
  module RedshiftIngester
    module RedshiftLoaderService
      class Client < ::Liveramp::Types::Servile::ServileService::Client 
        include ::Thrift::Client

        def request_load(config, options)
          send_request_load(config, options)
          return recv_request_load()
        end

        def send_request_load(config, options)
          send_message('request_load', Request_load_args, :config => config, :options => options)
        end

        def recv_request_load()
          result = receive_message(Request_load_result)
          return result.success unless result.success.nil?
          raise result.se unless result.se.nil?
          raise result.ice unless result.ice.nil?
          raise ::Thrift::ApplicationException.new(::Thrift::ApplicationException::MISSING_RESULT, 'request_load failed: unknown result')
        end

        def get_config(request_id)
          send_get_config(request_id)
          return recv_get_config()
        end

        def send_get_config(request_id)
          send_message('get_config', Get_config_args, :request_id => request_id)
        end

        def recv_get_config()
          result = receive_message(Get_config_result)
          return result.success unless result.success.nil?
          raise result.se unless result.se.nil?
          raise ::Thrift::ApplicationException.new(::Thrift::ApplicationException::MISSING_RESULT, 'get_config failed: unknown result')
        end

        def get_configs(request_ids)
          send_get_configs(request_ids)
          return recv_get_configs()
        end

        def send_get_configs(request_ids)
          send_message('get_configs', Get_configs_args, :request_ids => request_ids)
        end

        def recv_get_configs()
          result = receive_message(Get_configs_result)
          return result.success unless result.success.nil?
          raise result.se unless result.se.nil?
          raise ::Thrift::ApplicationException.new(::Thrift::ApplicationException::MISSING_RESULT, 'get_configs failed: unknown result')
        end

      end

      class Processor < ::Liveramp::Types::Servile::ServileService::Processor 
        include ::Thrift::Processor

        def process_request_load(seqid, iprot, oprot)
          args = read_args(iprot, Request_load_args)
          result = Request_load_result.new()
          begin
            result.success = @handler.request_load(args.config, args.options)
          rescue ::Liveramp::Types::Servile::ServileException => se
            result.se = se
          rescue ::Liveramp::Types::Servile::InvalidConfigException => ice
            result.ice = ice
          end
          write_result(result, oprot, 'request_load', seqid)
        end

        def process_get_config(seqid, iprot, oprot)
          args = read_args(iprot, Get_config_args)
          result = Get_config_result.new()
          begin
            result.success = @handler.get_config(args.request_id)
          rescue ::Liveramp::Types::Servile::ServileException => se
            result.se = se
          end
          write_result(result, oprot, 'get_config', seqid)
        end

        def process_get_configs(seqid, iprot, oprot)
          args = read_args(iprot, Get_configs_args)
          result = Get_configs_result.new()
          begin
            result.success = @handler.get_configs(args.request_ids)
          rescue ::Liveramp::Types::Servile::ServileException => se
            result.se = se
          end
          write_result(result, oprot, 'get_configs', seqid)
        end

      end

      # HELPER FUNCTIONS AND STRUCTURES

      class Request_load_args
        include ::Thrift::Struct, ::Thrift::Struct_Union
        CONFIG = 1
        OPTIONS = 2

        FIELDS = {
          CONFIG => {:type => ::Thrift::Types::STRUCT, :name => 'config', :class => ::Liveramp::RedshiftIngester::LoaderConfig},
          OPTIONS => {:type => ::Thrift::Types::STRUCT, :name => 'options', :class => ::Liveramp::Types::Servile::RequestOptions}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

      class Request_load_result
        include ::Thrift::Struct, ::Thrift::Struct_Union
        SUCCESS = 0
        SE = 1
        ICE = 2

        FIELDS = {
          SUCCESS => {:type => ::Thrift::Types::I64, :name => 'success'},
          SE => {:type => ::Thrift::Types::STRUCT, :name => 'se', :class => ::Liveramp::Types::Servile::ServileException},
          ICE => {:type => ::Thrift::Types::STRUCT, :name => 'ice', :class => ::Liveramp::Types::Servile::InvalidConfigException}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

      class Get_config_args
        include ::Thrift::Struct, ::Thrift::Struct_Union
        REQUEST_ID = 1

        FIELDS = {
          REQUEST_ID => {:type => ::Thrift::Types::I64, :name => 'request_id'}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

      class Get_config_result
        include ::Thrift::Struct, ::Thrift::Struct_Union
        SUCCESS = 0
        SE = 1

        FIELDS = {
          SUCCESS => {:type => ::Thrift::Types::STRUCT, :name => 'success', :class => ::Liveramp::RedshiftIngester::LoaderConfig},
          SE => {:type => ::Thrift::Types::STRUCT, :name => 'se', :class => ::Liveramp::Types::Servile::ServileException}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

      class Get_configs_args
        include ::Thrift::Struct, ::Thrift::Struct_Union
        REQUEST_IDS = 1

        FIELDS = {
          REQUEST_IDS => {:type => ::Thrift::Types::LIST, :name => 'request_ids', :element => {:type => ::Thrift::Types::I64}}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

      class Get_configs_result
        include ::Thrift::Struct, ::Thrift::Struct_Union
        SUCCESS = 0
        SE = 1

        FIELDS = {
          SUCCESS => {:type => ::Thrift::Types::MAP, :name => 'success', :key => {:type => ::Thrift::Types::I64}, :value => {:type => ::Thrift::Types::STRUCT, :class => ::Liveramp::RedshiftIngester::LoaderConfig}},
          SE => {:type => ::Thrift::Types::STRUCT, :name => 'se', :class => ::Liveramp::Types::Servile::ServileException}
        }

        def struct_fields; FIELDS; end

        def validate
        end

        ::Thrift::Struct.generate_accessors self
      end

    end

  end
end
